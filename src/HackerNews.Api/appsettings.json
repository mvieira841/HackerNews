{
  // Allows the API to accept requests from any host. In a strict production environment, 
  // you might restrict this to specific domain names.
  "AllowedHosts": "*",

  // Custom configuration section bound to HackerNewsSettings.cs on startup
  "HackerNewsSettings": {
    "BaseUrl": "https://hacker-news.firebaseio.com/v0/",

    // The Redis connection string. When running locally via 'dotnet run', it defaults to a local instance.
    // When running via Docker Compose, this gets overridden by an environment variable.
    "RedisConnectionString": "localhost:6379",

    // Cache durations to balance data freshness with API rate limits
    "BestStoriesCacheMinutes": 60,
    "StoryDetailsCacheMinutes": 15,

    // Controls how many concurrent HTTP requests the API can make to Hacker News simultaneously.
    "MaxDegreeOfParallelism": 50,

    // Configures the Token Bucket rate limiter (e.g., maximum 100 requests per second to the upstream API)
    "RequestsPerSecond": 100
  },

  // Structured logging configuration via Serilog
  "Serilog": {
    "Using": [ "Serilog.Sinks.Console" ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        // Suppress noisy internal Microsoft and System logs unless they are Warnings or Errors
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    // Automatically inject contextual data into every log entry
    "Enrich": [ "FromLogContext", "WithMachineName" ],
    "Properties": {
      "Application": "HackerNews.Api"
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          // Custom log template for high readability in the console
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj}{NewLine}{Properties}{NewLine}{Exception}"
        }
      }
    ]
  }
}